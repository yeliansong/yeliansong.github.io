<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>kubeadm concept and practice - LIANSONG&#39;S Blog</title><meta name="Description" content="Certification K8S Adminstration Examination"><meta property="og:title" content="kubeadm concept and practice" />
<meta property="og:description" content="Certification K8S Adminstration Examination" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" /><meta property="og:image" content="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/featured-image.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-01T19:00:00+08:00" />
<meta property="article:modified_time" content="2020-04-26T19:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/featured-image.png"/>
<meta name="twitter:title" content="kubeadm concept and practice"/>
<meta name="twitter:description" content="Certification K8S Adminstration Examination"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" /><link rel="prev" href="https://yeliansong.github.io/en/2020-4-24-sharing/" /><link rel="next" href="https://yeliansong.github.io/en/2019-10-19-cka-%E8%80%83%E5%89%8D%E8%B5%84%E6%96%99/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "kubeadm concept and practice",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/yeliansong.github.io\/en\/2020-3-14-kubeadm-concept-and-practice\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/yeliansong.github.io\/en\/2020-3-14-kubeadm-concept-and-practice\/featured-image.png",
                            "width":  2048 ,
                            "height":  1280 
                        }],"genre": "posts","keywords": "CKA Examination, K8S","wordcount":  640 ,
        "url": "https:\/\/yeliansong.github.io\/en\/2020-3-14-kubeadm-concept-and-practice\/","datePublished": "2020-05-01T19:00:00+08:00","dateModified": "2020-04-26T19:00:00+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "LIANSONG'S Blog","logo": "https:\/\/yeliansong.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Liansong"
            },"description": "Certification K8S Adminstration Examination"
    }
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-193031966-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-193031966-2');
</script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/en/" title="LIANSONG&#39;S Blog"><span class="header-title-pre"><i class='fas fa-user-astronaut'></i></span> LIANSONG&#39;S Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/en/posts/"> Posts </a><a class="menu-item" href="/en/tags/"> Tags </a><a class="menu-item" href="/en/categories/"> Categories </a><a class="menu-item" href="/en/about/"> About </a><a class="menu-item" href="https://www.linkedin.com/in/liansongye" title="Linkedin" rel="noopener noreffer" target="_blank"><i class='fab fa-linkedin-in fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/en/2020-3-14-kubeadm-concept-and-practice/" selected>English</option><option value="/2020-3-14-kubeadm-concept-and-practice/">简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/en/" title="LIANSONG&#39;S Blog"><span class="header-title-pre"><i class='fas fa-user-astronaut'></i></span> LIANSONG&#39;S Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/en/posts/" title="">Posts</a><a class="menu-item" href="/en/tags/" title="">Tags</a><a class="menu-item" href="/en/categories/" title="">Categories</a><a class="menu-item" href="/en/about/" title="">About</a><a class="menu-item" href="https://www.linkedin.com/in/liansongye" title="Linkedin" rel="noopener noreffer" target="_blank"><i class='fab fa-linkedin-in fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/en/2020-3-14-kubeadm-concept-and-practice/" selected>English</option><option value="/2020-3-14-kubeadm-concept-and-practice/">简体中文</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">kubeadm concept and practice</h1><h2 class="single-subtitle">CKA Examination</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/en/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Liansong</a></span>&nbsp;<span class="post-category">included in <a href="/en/categories/cka-examination/"><i class="far fa-folder fa-fw"></i>CKA Examination</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-05-01 19:00:00">2020-05-01 19:00:00</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;640 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;<span id="busuanzi_container_page_pv">
                    <i class="far fa-eye fa-fw"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;次阅读量</span>
                </span>
            </div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/en/2020-3-14-kubeadm-concept-and-practice/featured-image.png"
        data-srcset="/en/2020-3-14-kubeadm-concept-and-practice/featured-image.png, /en/2020-3-14-kubeadm-concept-and-practice/featured-image.png 1.5x, /en/2020-3-14-kubeadm-concept-and-practice/featured-image.png 2x"
        data-sizes="auto"
        alt="/en/2020-3-14-kubeadm-concept-and-practice/featured-image.png"
        title="Certification K8S Adminstration Examination" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-kubeadm-knowledge-map">1. kubeadm knowledge map</a></li>
        <li><a href="#2-kubeadm-practice">2. Kubeadm practice</a>
          <ul>
            <li><a href="#21-the-practice-environment">2.1 The practice environment</a></li>
            <li><a href="#22-environment-configure">2.2 Environment configure</a></li>
            <li><a href="#23-kubeadm-practice">2.3 kubeadm practice</a></li>
          </ul>
        </li>
        <li><a href="#3-additional">3. Additional</a></li>
        <li><a href="#4-reference-link">4. Reference Link</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="1-kubeadm-knowledge-map">1. kubeadm knowledge map</h3>
<img src="https://cdn.jsdelivr.net/gh/yeliansong/github-blog-PIC/blog-images/00831rSTgy1gctptvfodzj318m0min0y.jpg" style="zoom:200%;" />
<p>Kubeadm is a tool to implement the k8s environment quickly. Also you don&rsquo;t need to care about the configure environment, just know how to bootstrap it.  Master the basically command to use kubeadm.</p>
<h3 id="2-kubeadm-practice">2. Kubeadm practice</h3>
<h4 id="21-the-practice-environment">2.1 The practice environment</h4>
<p>Google cloud instance<br>
Linux system.</p>
<h4 id="22-environment-configure">2.2 Environment configure</h4>
<ul>
<li>
<p>Install container (Docker)</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 安装 Docker CE
</span></span><span class="line"><span class="cl">## 设置仓库
</span></span><span class="line"><span class="cl">### 安装软件包以允许 apt 通过 HTTPS 使用存储库
</span></span><span class="line"><span class="cl">apt-get update &amp;&amp; apt-get install \
</span></span><span class="line"><span class="cl">  apt-transport-https ca-certificates curl software-properties-common
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### 新增 Docker 的 官方 GPG 秘钥
</span></span><span class="line"><span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### 添加 Docker apt 仓库
</span></span><span class="line"><span class="cl">add-apt-repository \
</span></span><span class="line"><span class="cl">    &#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \                             
</span></span><span class="line"><span class="cl">        $(lsb_release -cs) \                                                                 
</span></span><span class="line"><span class="cl">        stable&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## 安装 Docker CE
</span></span><span class="line"><span class="cl">apt-get update &amp;&amp; apt-get install docker-ce=18.06.2~ce~3-0~ubuntu
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 设置 daemon
</span></span><span class="line"><span class="cl">cat &gt; /etc/docker/daemon.json &lt;&lt;EOF
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;exec-opts&#34;: [&#34;native.cgroupdriver=systemd&#34;],
</span></span><span class="line"><span class="cl">  &#34;log-driver&#34;: &#34;json-file&#34;,
</span></span><span class="line"><span class="cl">  &#34;log-opts&#34;: {
</span></span><span class="line"><span class="cl">  &#34;max-size&#34;: &#34;100m&#34;   
</span></span><span class="line"><span class="cl">},
</span></span><span class="line"><span class="cl">  &#34;storage-driver&#34;: &#34;overlay2&#34;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">EOF
</span></span><span class="line"><span class="cl">mkdir -p /etc/systemd/system/docker.service.d
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 重启 docker.
</span></span><span class="line"><span class="cl">systemctl daemon-reload
</span></span><span class="line"><span class="cl">systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p>Install kubeadm, kubectl and kubelet</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">apt-get update &amp;&amp; apt-get install -y apt-transport-https curl
</span></span><span class="line"><span class="cl">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &lt;&lt;EOF &gt;
</span></span><span class="line"><span class="cl">/etc/apt/sources.list.d/kubernetes.list
</span></span><span class="line"><span class="cl">deb https://apt.kubernetes.io/ kubernetes-xenial main
</span></span><span class="line"><span class="cl">EOF
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">apt-get update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">apt-get install -y kubelet kubeadm kubectl
</span></span><span class="line"><span class="cl">apt-mark hold kubelet kubeadm kubectl
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
</ul>
<h4 id="23-kubeadm-practice">2.3 kubeadm practice</h4>
<p>Background: Use kubeadm to create the k8s master node, then loop other nodes to this master node.</p>
<ul>
<li>Initialize the master node.
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubeadm init --pod-network-cidr<span class="o">=</span>10.244.0.0/16 --ignore-preflight-errors<span class="o">=</span>all
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
</ul>
<p>pod-network-cidr, means identify the pod ip range, also we use the flannel network design solution.<br>
Ignore, means ignore the error when startup. Because when start up kubeadm, perhaps hit the hardware uncomfortable.</p>
<ul>
<li>After start up successful, will generate the kubeadm token, this token can be used to join other nodes. You can use below command to view the token.
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubeadm token list
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
</ul>
<ul>
<li>
<p>Configure the kubectl.</p>
<p>As we know, kubectl is the command tool to control kubernetes cluster. When we switch to the master node, we need to configure the kubectl.</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p <span class="nv">$HOME</span>/.kube
</span></span><span class="line"><span class="cl">cp -i /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl">chown <span class="k">$(</span>id -u<span class="k">)</span>:<span class="k">$(</span>id -g<span class="k">)</span> <span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nb">export</span> <span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config&gt;&gt; ~/.bashrc
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p>Install the pod network add-on. The pods can communicate each other after install the pod network. Also we use the flannel network mode.</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p>Join other nodes to the cluster.</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo kubeadm join 10.128.0.2:6443 --token 5dhzcw.h7aih16mg982ms2o --discovery-token-ca-cert-hash sha256:e9e6843a6ae6fc5fb8acb9f116bc58d1c1e0f30d1da9bfe3bf151319c3788d57 --ignore-preflight-errors=all
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
<li>
<p>Clean up the environment.<br>
After deploy, you can clean up the environment.</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo kubeadm reset
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
</li>
</ul>
<h3 id="3-additional">3. Additional</h3>
<p>Actually there are many issues when you follow the steps.
Unsolved problems:</p>
<ul>
<li>After execute the kubeadm join command, the terminal show it was added successful, but in fact, the new node isn&rsquo;t existing in the node list.
<img src="https://cdn.jsdelivr.net/gh/yeliansong/github-blog-PIC/blog-images/00831rSTgy1gctpsng90mj326w0t6gx6.jpg" style="zoom:200%;" /></li>
</ul>
<p>The solution: I misunderstood the concept of kubeadm,  So hit this issue.
Actually, kubeadm aims to create the implement the k8s environment, so it will create the kubenetes master node when you execute the kubeadm init command. Then you can arrange other nodes to this master node. So my solution is like this.</p>
<p>At first, create a new instance, then in this instance configure the container, kubectl, kubelet and kubeadm tools. After this, execute this command.</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubeadm join --token 5dhzcw.h7aih16mg982ms2o 10.128.0.2:6443 --discovery-token-ca-cert-hash sha256:e9e6843a6ae6fc5fb8acb9f116bc58d1c1e0f30d1da9bfe3bf151319c3788d57 --ignore-preflight-errors=all
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>Certainly, you must be the root role. The result is below.</p>
  <img src="https://cdn.jsdelivr.net/gh/yeliansong/github-blog-PIC/blog-images/00831rSTgy1gcupzi3schj30vc03ymy7.jpg" style="zoom:200%;" />
<ul>
<li>In the node machine, when you execute the command &ldquo;kubectl version&rdquo; or &ldquo;kubectl get nodes&rdquo;, hit this issue.</li>
</ul>
  <img src="https://cdn.jsdelivr.net/gh/yeliansong/github-blog-PIC/blog-images/00831rSTgy1gd2sn8gkg0j31de032jsa.jpg" style="zoom:200%;" />
<p>You can download the master node, &ldquo;/etc/kubernetes/admin.conf&rdquo;, then copy this file to the node machine path &ldquo;/etc/kubernetes/&rdquo;. Then follow the previous steps to configure the kubectl.</p>
<h3 id="4-reference-link">4. Reference Link</h3>
<ul>
<li>
<p>How to install docker.</p>
<p>​	<a href="https://kubernetes.io/docs/setup/production-environment/container-runtimes/#docker" target="_blank" rel="noopener noreffer">https://kubernetes.io/docs/setup/production-environment/container-runtimes/#docker</a></p>
</li>
<li>
<p>How to install kubectl, kubeadm, kubelet.</p>
<p>​	<a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl" target="_blank" rel="noopener noreffer">https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl</a></p>
</li>
<li>
<p>Practice Intruction.</p>
<p>​	<a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/" target="_blank" rel="noopener noreffer">https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/</a></p>
</li>
</ul>
<p>​</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2020-04-26 19:00:00</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" data-title="kubeadm concept and practice" data-via="xxxx" data-hashtags="CKA Examination,K8S"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" data-hashtag="CKA Examination"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" data-title="kubeadm concept and practice" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" data-title="kubeadm concept and practice"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://yeliansong.github.io/en/2020-3-14-kubeadm-concept-and-practice/" data-title="kubeadm concept and practice"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/en/tags/cka-examination/">CKA Examination</a>,&nbsp;<a href="/en/tags/k8s/">K8S</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/en/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/en/2020-4-24-sharing/" class="prev" rel="prev" title="Cloud Tech,Container And K8S Sharing"><i class="fas fa-angle-left fa-fw"></i>Cloud Tech,Container And K8S Sharing</a>
            <a href="/en/2019-10-19-cka-%E8%80%83%E5%89%8D%E8%B5%84%E6%96%99/" class="next" rel="next" title="CKA Exam Materials">CKA Exam Materials<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript><div id="utterances"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.115.4">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/en/" target="_blank">LIANSONG&#39;S Blog</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></br>
                <span id="busuanzi_container_site_pv">
                    访问量 <span id="busuanzi_value_site_pv"></span> 次
                </span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_uv">
                    访客数 <span id="busuanzi_value_site_uv"></span> 人次
                </span>
                </br><script>
                    function siteTime() {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = 2021;
                        var startMonth = 3;
                        var startDate = 27;
                        var startHour = 19;
                        var startMinute = 15;
                        var startSecond = 11;
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);
                        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                            minutes);
                        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                            diffMinutes * minutes) / seconds);
                        if (startYear == todayYear) {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffDays + " 天 " + diffHours +
                                " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        } else {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + " 年 " + diffDays +
                                " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        }
                    }
                    setInterval(siteTime, 1000);
                </script>
                    <span id="sitetime">载入运行时间...</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"yeliansong/liansong_hugo-blog-talk"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
